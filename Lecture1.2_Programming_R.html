<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Econometrics</title>
    <meta charset="utf-8" />
    <meta name="author" content="Sujiao (Emma) ZHAO" />
    <link href="Lecture1.2_Programming_R_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="class\bplim-fonts.css" type="text/css" />
    <link rel="stylesheet" href="class\bplim.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# <strong>Econometrics</strong>
## <strong>2M3E03 R Tutorial</strong>
### Sujiao (Emma) ZHAO
### 2021/09/22 (updated: 2021-09-21)

---





class: center, middle, inverse

# **R Programming**

## **A Short Tutorial** 

---



&lt;br /&gt;

.pull-left[
&lt;div align="left"&gt;
&lt;img src="pictures/R_Logo.png" width=200 height=200&gt;
&lt;/div&gt;
]

.pull-right[
&lt;br /&gt;
.font120[
[The R Project for Statistical Computing](https://www.r-project.org/)
]
]

&lt;br /&gt;

"*[R](https://www.r-project.org/about.html) is a free software environment for statistical computing and graphics.*"


&lt;br /&gt;


Created by Ross Ihaka and Robert Gentleman, from Auckland university (New Zealand), as a research project. 


---

# R Language

&lt;div align="right"&gt;
.font150[
.blue[
**R is a dynamic, lazy, functional, object-oriented interpreted programming language.**
]
]
&lt;/div&gt;


&lt;br /&gt;

&lt;div align="left"&gt;
It has a package system that easily allows to create and share extensions.
&lt;/div&gt;

&lt;br /&gt;

&lt;div align="left"&gt;
It can be used both interactively or in batch mode.
&lt;/div&gt;

&lt;br /&gt;

&lt;div align="left"&gt;
It can be linked to other languages as C, C++, Python or Fortran.
&lt;/div&gt;


---


# Why learn R?

1 - Free to use; 

2 - Runs almost everywhere;

3 - Learn from the code base;

4 - rich tools (data analysis, statistical modeling and visualization)

5 - extensible functionality (designed around a true computer language);

5 - explore new methodology;

6 - easier to eliminate bugs;

7 - the language of choice for many data scientist and data analyst.


&lt;div align="left"&gt;
&lt;img src="pictures/R-User.png" width=800 height=200&gt;
&lt;/div&gt;

---

# RStudio

**RStudio** is an integrated development environment (IDE) for R.

It includes:

- a console;

- an editor with syntax-highlighting and code completion and diagnostics;

- plotting, history, debugging and workspace management.

&lt;br /&gt;

It can also be installed as a server, allowing remote access.


---

# Quick Tour: Basic Math

.scroll-output[


```r
1 + 2 # addition
```

```
## [1] 3
```

```r
1 - 2 # subtraction
```

```
## [1] -1
```

```r
2 * 3 # multiplication
```

```
## [1] 6
```

```r
2/3 # division
```

```
## [1] 0.6666667
```

```r
2^3 # exponent
```

```
## [1] 8
```

```r
3%%2 # reminder
```

```
## [1] 1
```

```r
5%/%2 # integer division
```

```
## [1] 2
```


&lt;br /&gt;


```r
2 * 3 - 1
```

```
## [1] 5
```

```r
2 * (3 - 1)
```

```
## [1] 4
```

```r
2^2 * 3
```

```
## [1] 12
```

```r
2^(2 * 3)
```

```
## [1] 64
```
]

---

# Quick Tour: Comparisons

#### .blue[**Operators**]

.scroll-output[


```r
1 == 1
```

```
## [1] TRUE
```

```r
2 != 1
```

```
## [1] TRUE
```

```r
2 &lt; 1
```

```
## [1] FALSE
```

```r
2 &gt; 1
```

```
## [1] TRUE
```

```r
2 &lt;= 2
```

```
## [1] TRUE
```

```r
3 &gt;= 2
```

```
## [1] TRUE
```

&lt;br /&gt;
  

```r
!(1 == 1)
```

```
## [1] FALSE
```

```r
(2 &lt; 1) &amp; (3 &gt; 2)
```

```
## [1] FALSE
```

```r
(2 &gt; 1) | (1 &gt; 2)
```

```
## [1] TRUE
```

```r
"a" == "A"
```

```
## [1] FALSE
```

```r
"a" == "a"
```

```
## [1] TRUE
```

```r
"j" &gt; "z"
```

```
## [1] FALSE
```

&lt;br /&gt;
]

---

# Quick Tour: Functions

.font100[
.blue[
**A function is group of instructions. They may take an input (parameters) and usually return a value (result).**
]
]

.scroll-output[

```r
rnorm(10)
```

```
##  [1]  0.210603681 -0.009297988 -0.123428756  0.557908163  0.629136769
##  [6] -1.689083602  1.298582047  0.737936625  0.667159321  1.193695812
```

```r
rnorm(10, mean = 10, sd = 1)
```

```
##  [1]  9.115414  8.867829 10.936914 11.487065  9.389739 10.134175 10.031943
##  [8]  9.175046  8.444968  8.566448
```

```r
rnorm(10, m = 10, sd = 1)
```

```
##  [1] 10.062184  9.957297 13.263490 11.306070 10.653785  8.913335  9.820999
##  [8]  8.569449 10.342706 10.872891
```

```r
getwd()
```

```
## [1] "C:/Users/bpu058246/Desktop/Teaching/Econometria/Lectures"
```

&lt;br /&gt;
]

---

# Quick Tour: Generic functions

.font100[
.blue[
**A function may act differently depending on the object that we pass as an argument. They are called in R: generic functions.**
]
]

.scroll-output[

To get all methods from a given function use:


```r
methods(summary)
```

```
##  [1] summary.aov                    summary.aovlist*              
##  [3] summary.aspell*                summary.check_packages_in_dir*
##  [5] summary.connection             summary.data.frame            
##  [7] summary.Date                   summary.default               
##  [9] summary.ecdf*                  summary.factor                
## [11] summary.glm                    summary.infl*                 
## [13] summary.lm                     summary.loess*                
## [15] summary.manova                 summary.matrix                
## [17] summary.mlm*                   summary.nls*                  
## [19] summary.packageStatus*         summary.POSIXct               
## [21] summary.POSIXlt                summary.ppr*                  
## [23] summary.prcomp*                summary.princomp*             
## [25] summary.proc_time              summary.rlang_error*          
## [27] summary.rlang_trace*           summary.srcfile               
## [29] summary.srcref                 summary.stepfun               
## [31] summary.stl*                   summary.table                 
## [33] summary.tukeysmooth*           summary.warnings              
## see '?methods' for accessing help and source code
```

We can get the function arguments using args():


```r
args(rnorm)
```

```
## function (n, mean = 0, sd = 1) 
## NULL
```

&lt;br /&gt;

&lt;br /&gt;

&lt;br /&gt;
]

---

# Help
.font100[
.blue[
**inside R**
]
]

We can use R and RStudio to get help:

.scroll-output[

- If we don't know exactly what we are looking for:


```r
help.search("normal distribution")
```


```r
??"normal distribution"
```


- If we know what we are looking for:


```r
?rnorm
```


```r
?"+"
```


- We can also run all the examples within the help page of a function using:

```r
example(rnorm)
```

- If we are not completely sure about the name of the function:

```r
apropos("rno")
apropos("norm")
```

- find() tells what package something is in:


```r
find("rnorm")
```

&lt;br /&gt;

&lt;br /&gt;

&lt;br /&gt;
]



---

# Help
.font100[
.blue[
**inside R**
]
]

We can use R and RStudio to get help:



.scroll-output[

.font85[
- Many R packages also have vignettes (more detailed descriptions on how the
packages work).

    - To list the avaliable ones:
    

```r
# List vignette from loaded (attached packages)
vignette(all = FALSE)
## List vignettes from all installed packages
vignette(all = TRUE)
```

- If we know the name of the vignette:



```r
vignette("dplyr")
vignette("Formula")
```

- A friendlier option is:


```r
browseVignettes()
```

&lt;br /&gt;

&lt;br /&gt;

&lt;br /&gt;
]
]



---

# Help
.font100[
.blue[
**outside R**
]
]


- **[The R manuals](https://cran.r-project.org/)**

- **[The R forums and lists](https://cran.r-project.org/)**

- **[Google](https://www.google.com/#spf=1630403191354)**

- **[Stack Overflow](https://stackoverflow.com/questions/tagged/r)** for R problems (make sure to use the [r] tag)
    
- **[Cross Validated](https://stats.stackexchange.com/questions/tagged/r)** for statistical problems (you can also use the [r] tag)



---

# Help
.font100[
.blue[
**outside R**
]
]


.scroll-output[

**Before asking a question make sure that you have**:

- Searched before asking the question

- Narrowed down the problem

- Been explicit about what you are trying to do and provide an example of what
you want to accomplish.



**Be sure to provided a reproducible example**:

- Include the list of packages that you have loaded

- Provide a minimal dataset

- The absolute minimum code that you have that narrows down the problem

- The expected output or end result

&lt;br /&gt;

&lt;br /&gt;

]


---

# Help

.font100[
.blue[
**outside R**
]
]


For more on this take a look at:

- [Prepare Reproducible Example Code for Sharing • reprex](https://reprex.tidyverse.org/)

- [Minimal reproducible examples | Hyndsight](https://robjhyndman.com/hyndsight/minimal-reproducible-examples/)

- [Reproducibility · Advanced R.](http://adv-r.had.co.nz/Reproducibility.html)

- [r faq - How to make a great R reproducible example? - Stack Overflow](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)


---

# Packages

.font100[
.blue[
**Nomenclature**
]
]


- In R the place where a package is installed is called library.

- R does not automatically load all the installed packages.

- To get a list of all loaded packages (also gives the path where those packages are in your hard drive.):


```r
path.package()
```

- To get the list of installed packages use:


```r
installed.packages()
```


---

# Packages

.scroll-output[

.font100[
.blue[
**Installing a package**
]
]

We can install packages using the RStudio or the *install.packages()* command:


```r
install.packages("dplyr")
```

.font100[
.blue[
**Removing a package**
]
]


```r
remove.packages("dplyr")
```


.font100[
.blue[
**Loading packages**
]
]

An installed package cannot be used before being loaded. To load and attach a package we use *library()*:


```r
library("dplyr")
```

.font100[
.blue[
**Unloading packages**
]
]

To unload/detach a package we use *detach()*:


```r
detach(package:dplyr)
```

.font100[
.blue[
**Listing the package functions**
]
]

To get the list of all functions from a package(also provides useful additional information):


```r
library(help = dplyr)
```

]



---

# Objects &amp; Variables

.font100[
.blue[
**Objects**
]
]

In R everything is an object, and an object is an instance of a class. Objects have attributes and methods that depend on their class.


.font100[
.blue[
**Variables**
]
]

Variables in R can can hold values (numeric or otherwise), but also output of functions, or even functions. Variables can hold any R object. Since R is a dynamically typed language we don't need to define variable types.

---

# Objects &amp; Variables

.font100[
.blue[
**Variable Assignment**
]
]

R has two assignment operators: = and &lt;-

.scroll-output[


```r
a &lt;- 5
a
```

```
## [1] 5
```

```r
a &lt;- "ten"
a
```

```
## [1] "ten"
```


```r
a &lt;- 6
print(a)
```

```
## [1] 6
```

The assignment operator can be used (but not recommended) in the other direction -&gt; and mutiple times:



```r
1 -&gt; a -&gt; b
a
```

```
## [1] 1
```

```r
b
```

```
## [1] 1
```

&lt;br /&gt;

&lt;br /&gt;

&lt;br /&gt;


]


---

# Objects &amp; Variables

.font100[
.blue[
**Variable Names**
]
]

.scroll-output[
.font85[
- Variable names can contain any combination of alphanumeric characters along with periods (.) and underscores (_).


```r
.a &lt;- 1
a.b &lt;- 1
a_b &lt;- 1
a1 &lt;- 1
```

- Be aware that variable names are case sensitive.


```r
a &lt;- 1
A &lt;- 2
a
```

```
## [1] 1
```

```r
A
```

```
## [1] 2
```

- There are no reserved words in R! And there are many one letter words that already have special meaning: c, q, t, C, D, F, I, and T.

&lt;br /&gt;

&lt;br /&gt;

]
]



---

# Objects &amp; Variables

.font100[
.blue[
**Variable Names**
]
]

.font85[

- A few other naming rules:

    - They cannot start with a number or an underscore

    - If they start with a dot (.) the character cannot be a number.
    

Try to be consistent!

Take a look at: [Style guide · Advanced R.](http://adv-r.had.co.nz/Style.html)

]


---

# Objects &amp; Variables

.font100[
.blue[
**Variable Management**
]
]

.font85[

- To list variables use the ls() function


```r
ls()
```

```
## [1] "a"   "A"   "a.b" "a_b" "a1"  "b"
```

- To view established variables


```r
View(a)
```

- To remove variables


```r
rm(a)
```

Note that this will remove the pointer but will not release the memory address
immediately.

]


---

# R Data Types

Data types are also called modes in R.

There are several, among them:

- logical (TRUE/FALSE or T/F)

- integer

- double

- character

- complex

---

# R Data Types

To check the type of an object use: *typeof()*

.scroll-output[
.font85[

```r
typeof(TRUE)
```

```
## [1] "logical"
```

```r
typeof(1L)
```

```
## [1] "integer"
```

```r
typeof(1)
```

```
## [1] "double"
```

```r
typeof("test")
```

```
## [1] "character"
```

```r
typeof(1 + (0+2i))
```

```
## [1] "complex"
```

```r
# 1 corresponds to the real part and 2 to the imaginary part of the number
```

&lt;br /&gt; 

&lt;br /&gt; 

&lt;br /&gt; 

&lt;br /&gt; 

&lt;br /&gt; 

&lt;br /&gt; 
]
]


---

# R Data Types

We can check the type of an object using the functions *is.character()*, *is.double()*, *is.integer()*, *is.logical()*, *is.complex()*

.scroll-output[
.font85[

```r
is.logical(TRUE)
```

```
## [1] TRUE
```

```r
is.integer(1L)
```

```
## [1] TRUE
```

```r
is.double(1)
```

```
## [1] TRUE
```

```r
is.character("test")
```

```
## [1] TRUE
```

```r
is.complex(1 + (0+2i))
```

```
## [1] TRUE
```

&lt;br /&gt; 

&lt;br /&gt; 

]
]


---

# R Data Structures

R has several data structures:

.font85[

- vectors (one-dimensional): A vector can be thought of as contiguous cells containing data.

- matrices (two-dimensional) 

- lists (multi-dimensional)

- data.frames (two-dimensional) 

- arrays (multi-dimensional) 

]



---

# R Data Structures

.font100[
.blue[
**Vectors**
]
]

.scroll-output[
.font85[


```r
c(1, 2, 5)
```

```
## [1] 1 2 5
```

```r
1:10
```

```
##  [1]  1  2  3  4  5  6  7  8  9 10
```

```r
seq(from = 1, to = 30, by = 4)
```

```
## [1]  1  5  9 13 17 21 25 29
```

```r
seq(from = 0.1, to = 1, length = 10)
```

```
##  [1] 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0
```

```r
rep(1, 10)
```

```
##  [1] 1 1 1 1 1 1 1 1 1 1
```

```r
rep(c(1, 2, 3), 3)
```

```
## [1] 1 2 3 1 2 3 1 2 3
```


```r
a_vector &lt;- 1:10
a_vector
```

```
##  [1]  1  2  3  4  5  6  7  8  9 10
```

```r
b_vector &lt;- c(1L, 2L)
b_vector
```

```
## [1] 1 2
```

```r
d_vector &lt;- 1
d_vector
```

```
## [1] 1
```

```r
e_vector &lt;- c(TRUE, TRUE, FALSE)
e_vector
```

```
## [1]  TRUE  TRUE FALSE
```

```r
f_vector &lt;- c(1, "a")
f_vector
```

```
## [1] "1" "a"
```
&lt;br /&gt; 

&lt;br /&gt; 
]
]



---

# R Data Structures

.font100[
.blue[
**Vectors: Useful functions**
]
]


.scroll-output[
.font85[


```r
x &lt;- 1:20
mean(x) # average
```

```
## [1] 10.5
```

```r
sd(x) # standard deviation
```

```
## [1] 5.91608
```

```r
var(x) # variance of x
```

```
## [1] 35
```

```r
min(x) # min
```

```
## [1] 1
```

```r
max(x) # max
```

```
## [1] 20
```

```r
abs(x) # absolute value
```

```
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
```

```r
sum(x) # summation
```

```
## [1] 210
```

&lt;br /&gt; 

&lt;br /&gt; 
]
]


---

# R Data Structures

.font100[
.blue[
**Vectors: Comparisons**
]
]

.scroll-output[
.font85[


```r
x &lt;- 1:10
x &gt;= 5
```

```
##  [1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
```


```r
x &lt;- 1:10
y &lt;- 10:1
x &gt; y
```

```
##  [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
```

```r
any(x &gt; y)
```

```
## [1] TRUE
```

```r
all(x &gt; y)
```

```
## [1] FALSE
```


&lt;br /&gt; 
&lt;br /&gt;
&lt;br /&gt; 
]
]


---

# R Data Structures

.font100[
.blue[
**Vectors: Missing values**
]
]

- R missing values are defined by NA

.scroll-output[
.font80[


```r
x &lt;- c(1, NA, 5)
is.na(x)
```

```
## [1] FALSE  TRUE FALSE
```

```r
mean(x)
```

```
## [1] NA
```

```r
mean(x, na.rm = TRUE)
```

```
## [1] 3
```
&lt;br /&gt;
]
]

---

# R Data Structures

.font100[
.blue[
**Vectors: Missing values**
]
]


- We can remove missing values with na.omit()



```r
x &lt;- c(1, NA, 5, NA)
na.omit(x)
```

```
## [1] 1 5
## attr(,"na.action")
## [1] 2 4
## attr(,"class")
## [1] "omit"
```


---

# R Data Structures

.font100[
.blue[
**Vectors: Missing values**
]
]

- NA vs NULL: In R NULL correspond to nothing (absence of anything).

.scroll-output[
.font80[


```r
x &lt;- c(1, NA, 5)
x
```

```
## [1]  1 NA  5
```

```r
x &lt;- NULL
x
```

```
## NULL
```

```r
is.null(x)
```

```
## [1] TRUE
```
&lt;br /&gt;


```r
x &lt;- NA
length(x)
```

```
## [1] 1
```

```r
x &lt;- NULL
is.null(x)
```

```
## [1] TRUE
```

```r
length(x)
```

```
## [1] 0
```


&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
]
]


---

# R Data Structures

.font100[
.blue[
**Vectors**
]
]


- We can also do explicit coercion of objects with the as. functions


```r
x &lt;- 0:10
as.character(x)
```

```
##  [1] "0"  "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"
```

```r
as.logical(x)
```

```
##  [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
```

```r
x &lt;- c("a", "b", "c")
as.numeric(x)
```

```
## Warning: NAs introduced by coercion
```

```
## [1] NA NA NA
```

---

# R Data Structures

.font100[
.blue[
**Vectors: Slicing &amp; Filtering**
]
]


- Slicing: We can select elements of a vector using the "[" operator

- Filtering: 

    - Filtering consists of extracting elements of a vector that satisfy a given condition. 

    - We can use logical indices.
    
    - We can also use subset().
    
    - We can also use which().
    
    - We can also use filtering for assignments.
    
    - We can add a comment attribute to an R object using comment()
    
---

# R Data Structures

.font100[
.blue[
**Vectors: Slicing &amp; Filtering**
]
]

.scroll-output[
.font80[    
    

```r
x &lt;- 10:18
x[x%%2 == 0]
```

```
## [1] 10 12 14 16 18
```

```r
subset(x, x%%2 == 0)
```

```
## [1] 10 12 14 16 18
```

```r
x[which(x%%2 == 0)]
```

```
## [1] 10 12 14 16 18
```

```r
comment(x) &lt;- "This is a comment"
attributes(x)
```

```
## $comment
## [1] "This is a comment"
```

```r
comment(x)
```

```
## [1] "This is a comment"
```

&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
]
]


---

# R Data Structures

.font100[
.blue[
**Vectors**
]
]

&lt;br /&gt;
&lt;br /&gt;

.font150[
.red[
&lt;div align="center"&gt;
Arrays, matrices, and even lists are vectors with some extra class attributes!
&lt;/div&gt;
]
]


---

# R Data Structures

.font100[
.blue[
**data.frames**
]
]

- data.frames is one of the most useful features of R. 

- They are a collection of vectors all with the same size.

- Creating a data.frame

.font85[

```r
set.seed(12345)
a_df &lt;- data.frame(subject = letters[1:15],
height = rnorm(15, 170, 5),
weight = rnorm(15, 70, 10),
stringsAsFactors = FALSE)
```

&lt;br /&gt; 
]


---

# R Data Structures

.font100[
.blue[
**data.frames**
]
]

.scroll-output[
.font85[

- Testing if an object is a data.frame


```r
is.data.frame(a_df)
```

```
## [1] TRUE
```

```r
class(a_df)
```

```
## [1] "data.frame"
```


- Attributes of a data.frame


```r
attributes(a_df)
```

```
## $names
## [1] "subject" "height"  "weight" 
## 
## $class
## [1] "data.frame"
## 
## $row.names
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
```

```r
dim(a_df)
```

```
## [1] 15  3
```

```r
length(a_df)
```

```
## [1] 3
```

```r
nrow(a_df)
```

```
## [1] 15
```

```r
ncol(a_df)
```

```
## [1] 3
```

```r
names(a_df)
```

```
## [1] "subject" "height"  "weight"
```


- Inspecting a data.frame


```r
View(a_df)
str(a_df)
```

```
## 'data.frame':	15 obs. of  3 variables:
##  $ subject: chr  "a" "b" "c" "d" ...
##  $ height : num  173 174 169 168 173 ...
##  $ weight : num  78.2 61.1 66.7 81.2 73 ...
```

```r
summary(a_df)
```

```
##    subject              height          weight     
##  Length:15          Min.   :160.9   Min.   :54.02  
##  Class :character   1st Qu.:168.2   1st Qu.:64.37  
##  Mode  :character   Median :169.5   Median :72.99  
##                     Mean   :170.2   Mean   :71.23  
##                     3rd Qu.:173.0   3rd Qu.:77.98  
##                     Max.   :179.1   Max.   :88.05
```

```r
head(a_df)
```

```
##   subject   height   weight
## 1       a 172.9276 78.16900
## 2       b 173.5473 61.13642
## 3       c 169.4535 66.68422
## 4       d 167.7325 81.20713
## 5       e 173.0294 72.98724
## 6       f 160.9102 77.79622
```

```r
tail(a_df)
```

```
##    subject   height   weight
## 10       j 165.4034 54.02290
## 11       k 169.4188 88.05098
## 12       l 179.0866 65.18353
## 13       m 171.8531 76.20380
## 14       n 172.6011 76.12123
## 15       o 166.2473 68.37689
```

&lt;br /&gt; 

]
]


---

# R Data Structures

.font100[
.blue[
**data.frames: Subsetting**
]
]

.scroll-output[
.font85[

- Since data.frame is a list we can use the $ operator:


```r
a_df$subject
```

```
##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o"
```

```r
class(a_df)
```

```
## [1] "data.frame"
```


- But they are also vectors so we can use the []:


```r
a_df[2:3, ]
```

```
##   subject   height   weight
## 2       b 173.5473 61.13642
## 3       c 169.4535 66.68422
```

```r
a_df[2:3, 1]
```

```
## [1] "b" "c"
```



```r
a_df[2:3, "subject"]
```

```
## [1] "b" "c"
```

```r
a_df["subject"]
```

```
##    subject
## 1        a
## 2        b
## 3        c
## 4        d
## 5        e
## 6        f
## 7        g
## 8        h
## 9        i
## 10       j
## 11       k
## 12       l
## 13       m
## 14       n
## 15       o
```

```r
class(a_df["subject"])
```

```
## [1] "data.frame"
```

```r
a_df[, "subject"]
```

```
##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o"
```

```r
class(a_df[, "subject"])
```

```
## [1] "character"
```

```r
a_df[["subject"]]
```

```
##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o"
```

```r
class(a_df[["subject"]])
```

```
## [1] "character"
```

&lt;br /&gt; 

&lt;br /&gt; 

]
]

---

# R Data Structures

.font100[
.blue[
**data.frames: Filtering**
]
]

.scroll-output[
.font85[

- Select all subjects with height greater than 170:


```r
a_df[a_df$height &gt; 170, ]
```

```
##    subject   height   weight
## 1        a 172.9276 78.16900
## 2        b 173.5473 61.13642
## 5        e 173.0294 72.98724
## 7        g 173.1505 84.55785
## 12       l 179.0866 65.18353
## 13       m 171.8531 76.20380
## 14       n 172.6011 76.12123
```

- Select all subjects with height less than 170 and weight greater than 75:


```r
a_df[a_df$height &lt; 170 &amp; a_df$weight &lt; 65, ]
```

```
##    subject   height   weight
## 8        h 168.6191 63.55672
## 9        i 168.5792 54.46863
## 10       j 165.4034 54.02290
```

&lt;br /&gt; 

&lt;br /&gt; 
]
]


---

# R Data Structures

.font100[
.blue[
**data.frames: Adding &amp; Removing Columns**
]
]

.scroll-output[
.font85[

- Let's create the column BMI as the person's weight in kilograms divided by the square of height in meters:



```r
a_df$bmi &lt;- a_df$weight/((a_df$height/100)^2)
```

- Now we can select the subjects overweight (25 &lt; bmi &lt; 30 )


```r
a_df[a_df$bmi &lt; 30 &amp; a_df$bmi &gt; 25, ]
```

```
##    subject   height   weight      bmi
## 1        a 172.9276 78.16900 26.14001
## 4        d 167.7325 81.20713 28.86421
## 7        g 173.1505 84.55785 28.20373
## 13       m 171.8531 76.20380 25.80249
## 14       n 172.6011 76.12123 25.55164
```

```r
subset(a_df, a_df$bmi &lt; 30 &amp; a_df$bmi &gt; 25)
```

```
##    subject   height   weight      bmi
## 1        a 172.9276 78.16900 26.14001
## 4        d 167.7325 81.20713 28.86421
## 7        g 173.1505 84.55785 28.20373
## 13       m 171.8531 76.20380 25.80249
## 14       n 172.6011 76.12123 25.55164
```


- It is also possible to use cbind() and rbind() to add new columns and rows to a data.frame

- Removing columns


```r
b_df &lt;- a_df
b_df$bmi &lt;- NULL
head(b_df)
```

```
##   subject   height   weight
## 1       a 172.9276 78.16900
## 2       b 173.5473 61.13642
## 3       c 169.4535 66.68422
## 4       d 167.7325 81.20713
## 5       e 173.0294 72.98724
## 6       f 160.9102 77.79622
```

&lt;br /&gt; 

&lt;br /&gt; 

]
]


---

# Tips and Shortcuts


- Run codes: **ctrl + Enter** 

- Interrrupts R: **ESC** 

- Comment out scripts or change it back: **Shift + ctrl + c**

- Re-run Chunk: **shift + ctrl + p**

- Delete lines: **ctrl + d**

- Clear the console: **Ctrl + L**

- Change tab

    - Previous: **ctrl + F11**
    
    - Next: **ctrl + F12**
    
---

# Tips and Shortcuts

- Use `tidyverse`



```r
library(tidyverse)
```


```r
read.csv()
read_csv() # from tidyverse and much faster
```



```r
library(tidyverse)
iris %&gt;% 
  select(Sepal.Width, Sepal.Length) %&gt;% 
  mutate(Sepal_Aqr=Sepal.Length*Sepal.Length) %&gt;% 
  filter(Sepal.Width &gt;3) %&gt;% 
  summarize(sum(Sepal_Aqr))
```

```
##   sum(Sepal_Aqr)
## 1         2215.5
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
